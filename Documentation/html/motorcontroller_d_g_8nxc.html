<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nxcBoost: D:/nxc/nxcBoost/motorcontrollerDG.nxc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nxcBoost
   </div>
   <div id="projectbrief">Library for NXC</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('motorcontroller_d_g_8nxc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">motorcontrollerDG.nxc File Reference<div class="ingroups"><a class="el" href="group__motorcontroller.html">Motorcontroller</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Background task and high level routines to control motors.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a880b459c06d27b335cacc1cf49763fc9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a880b459c06d27b335cacc1cf49763fc9">initMC</a> (int motors=3, int amax=18, int vmax=100, int regTime=10)</td></tr>
<tr class="memdesc:a880b459c06d27b335cacc1cf49763fc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the motorcontroller.  <a href="#a880b459c06d27b335cacc1cf49763fc9">More...</a><br/></td></tr>
<tr class="separator:a880b459c06d27b335cacc1cf49763fc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae43e578320f7a1995aadbabb53dfcf13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#ae43e578320f7a1995aadbabb53dfcf13">controllerPara</a> (byte m, int amax, int vmax)</td></tr>
<tr class="memdesc:ae43e578320f7a1995aadbabb53dfcf13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set control parameter for one motor.  <a href="#ae43e578320f7a1995aadbabb53dfcf13">More...</a><br/></td></tr>
<tr class="separator:ae43e578320f7a1995aadbabb53dfcf13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b537f3e337b36f950bce46bb4e5ba7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a1b537f3e337b36f950bce46bb4e5ba7d">controllerOn</a> ()</td></tr>
<tr class="memdesc:a1b537f3e337b36f950bce46bb4e5ba7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the motor controller.  <a href="#a1b537f3e337b36f950bce46bb4e5ba7d">More...</a><br/></td></tr>
<tr class="separator:a1b537f3e337b36f950bce46bb4e5ba7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07d4e5d1134de746dab0e35406ea02c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a07d4e5d1134de746dab0e35406ea02c1">controllerOff</a> ()</td></tr>
<tr class="memdesc:a07d4e5d1134de746dab0e35406ea02c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the motor controller.  <a href="#a07d4e5d1134de746dab0e35406ea02c1">More...</a><br/></td></tr>
<tr class="separator:a07d4e5d1134de746dab0e35406ea02c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0240b36f109cfa84440cde412e754403"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a0240b36f109cfa84440cde412e754403">controllerOnEx</a> (byte m)</td></tr>
<tr class="memdesc:a0240b36f109cfa84440cde412e754403"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the motor controller for one motor.  <a href="#a0240b36f109cfa84440cde412e754403">More...</a><br/></td></tr>
<tr class="separator:a0240b36f109cfa84440cde412e754403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b95ad436f38940b8346c060b030ab1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a95b95ad436f38940b8346c060b030ab1">controllerOffEx</a> (byte m)</td></tr>
<tr class="memdesc:a95b95ad436f38940b8346c060b030ab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the motor controller for one motor.  <a href="#a95b95ad436f38940b8346c060b030ab1">More...</a><br/></td></tr>
<tr class="separator:a95b95ad436f38940b8346c060b030ab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04b8456baf10d81cebd9170d9415a90b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a04b8456baf10d81cebd9170d9415a90b">resetMotor</a> (byte m, char pwr)</td></tr>
<tr class="memdesc:a04b8456baf10d81cebd9170d9415a90b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the motor.  <a href="#a04b8456baf10d81cebd9170d9415a90b">More...</a><br/></td></tr>
<tr class="separator:a04b8456baf10d81cebd9170d9415a90b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55bcc3fb8765627dc4a86ea69dbba619"><td class="memItemLeft" align="right" valign="top">task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a55bcc3fb8765627dc4a86ea69dbba619">Motor_Controller_Task</a> ()</td></tr>
<tr class="memdesc:a55bcc3fb8765627dc4a86ea69dbba619"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main control task.  <a href="#a55bcc3fb8765627dc4a86ea69dbba619">More...</a><br/></td></tr>
<tr class="separator:a55bcc3fb8765627dc4a86ea69dbba619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11998768581b2e726f21d565ee4e1449"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a11998768581b2e726f21d565ee4e1449">waitMove</a> (int m)</td></tr>
<tr class="memdesc:a11998768581b2e726f21d565ee4e1449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until last move is done.  <a href="#a11998768581b2e726f21d565ee4e1449">More...</a><br/></td></tr>
<tr class="separator:a11998768581b2e726f21d565ee4e1449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a319794c32fee3af065fc89a9acf1be6b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a319794c32fee3af065fc89a9acf1be6b">moveDone</a> (int m)</td></tr>
<tr class="memdesc:a319794c32fee3af065fc89a9acf1be6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if move is done.  <a href="#a319794c32fee3af065fc89a9acf1be6b">More...</a><br/></td></tr>
<tr class="separator:a319794c32fee3af065fc89a9acf1be6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4549b464f902b13018351bfe4d6c0731"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a4549b464f902b13018351bfe4d6c0731">moveAbs</a> (int m, long pos, int pwr=0, bool wait_move=true)</td></tr>
<tr class="memdesc:a4549b464f902b13018351bfe4d6c0731"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move motor to absolute position.  <a href="#a4549b464f902b13018351bfe4d6c0731">More...</a><br/></td></tr>
<tr class="separator:a4549b464f902b13018351bfe4d6c0731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac54d65a40b60cea5003df3fd21dc8f13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#ac54d65a40b60cea5003df3fd21dc8f13">moveRel</a> (int m, long pos, int pwr=0, bool wait_move=true, long off=0)</td></tr>
<tr class="memdesc:ac54d65a40b60cea5003df3fd21dc8f13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move motor relative.  <a href="#ac54d65a40b60cea5003df3fd21dc8f13">More...</a><br/></td></tr>
<tr class="separator:ac54d65a40b60cea5003df3fd21dc8f13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a389643e60e17074ddcb0a860fe4f9835"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a389643e60e17074ddcb0a860fe4f9835">moveFwd</a> (int m, char pwr)</td></tr>
<tr class="memdesc:a389643e60e17074ddcb0a860fe4f9835"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run motor forward.  <a href="#a389643e60e17074ddcb0a860fe4f9835">More...</a><br/></td></tr>
<tr class="separator:a389643e60e17074ddcb0a860fe4f9835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21089b6deb0882d334999de0a8916b05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#a21089b6deb0882d334999de0a8916b05">moveRev</a> (int m, char pwr)</td></tr>
<tr class="memdesc:a21089b6deb0882d334999de0a8916b05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run motor reverse dir.  <a href="#a21089b6deb0882d334999de0a8916b05">More...</a><br/></td></tr>
<tr class="separator:a21089b6deb0882d334999de0a8916b05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac22c63565d6a7aa8f9528f92bec72999"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#ac22c63565d6a7aa8f9528f92bec72999">motorOff</a> (int m)</td></tr>
<tr class="memdesc:ac22c63565d6a7aa8f9528f92bec72999"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop and break motor.  <a href="#ac22c63565d6a7aa8f9528f92bec72999">More...</a><br/></td></tr>
<tr class="separator:ac22c63565d6a7aa8f9528f92bec72999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3700fdd19b88a02d1825fd033cbdc3b"><td class="memItemLeft" align="right" valign="top">safecall void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#ad3700fdd19b88a02d1825fd033cbdc3b">motorEmergencyStop</a> ()</td></tr>
<tr class="memdesc:ad3700fdd19b88a02d1825fd033cbdc3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop (all) motors and shut down motor controller.  <a href="#ad3700fdd19b88a02d1825fd033cbdc3b">More...</a><br/></td></tr>
<tr class="separator:ad3700fdd19b88a02d1825fd033cbdc3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afb1e3999d2d8c484285a6799b9805578"><td class="memItemLeft" align="right" valign="top">mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motorcontroller_d_g_8nxc.html#afb1e3999d2d8c484285a6799b9805578">motor_mtx</a></td></tr>
<tr class="separator:afb1e3999d2d8c484285a6799b9805578"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Background task and high level routines to control motors. </p>
<p>Originator: David Gilday <br/>
 <a href="http://mindcuber.com/">http://mindcuber.com/</a> <br/>
 Edit: Martin Aumair <br/>
 </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a07d4e5d1134de746dab0e35406ea02c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void controllerOff </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the motor controller. </p>
<p>Motor controller will be stopped. Its mainly for saving process time with controllerOff/On. Use this function if you want to use nxc motor functions. (OnFwd..) The function waits until the last move is done. </p>

</div>
</div>
<a class="anchor" id="a95b95ad436f38940b8346c060b030ab1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void controllerOffEx </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the motor controller for one motor. </p>
<p>Motor controller will be stopped. Its mainly for saving process time with controllerOff/On. Use this function if you want to use nxc motor functions. (OnFwd..) The function waits until the last move is done.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Desired output port: OUT_A, OUT_B, OUT_C. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1b537f3e337b36f950bce46bb4e5ba7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void controllerOn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the motor controller. </p>
<p>Motor controller will be started automatically when calling a move funtion. Its mainly for saving process time with controllerOff/On. </p>

</div>
</div>
<a class="anchor" id="a0240b36f109cfa84440cde412e754403"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void controllerOnEx </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the motor controller for one motor. </p>
<p>Motor controller will be started automatically when calling a move funtion. Its mainly for saving process time with controllerOff/On.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Desired output port: OUT_A, OUT_B, OUT_C. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae43e578320f7a1995aadbabb53dfcf13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void controllerPara </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>amax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vmax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set control parameter for one motor. </p>
<p>Amax represents the maximum Acceleration that will be achieved when the motor is stationary and the maximum power is applied. Its mainly for holding the motor in position. High amax-&gt; high overshooting. Vmax is the maximum Velocity that will be achieved. High vmax -&gt; smoother breaking, no overshooting.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Desired output port: OUT_A, OUT_B, OUT_C </td></tr>
    <tr><td class="paramname">amax</td><td>Control-parameter maximum Acceleration. </td></tr>
    <tr><td class="paramname">vmax</td><td>Control-parameter maximum Velocity. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a880b459c06d27b335cacc1cf49763fc9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initMC </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>motors</em> = <code>3</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>amax</em> = <code>18</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vmax</em> = <code>100</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>regTime</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the motorcontroller. </p>
<p>Tuning parameters with labview program. Call this function befor starting the motor_controller_task! The control-parameters are set for all motors. If you want to control only 2 or 1 motor make sure it is connected in the order: A,B,C. So if you set motors to 1, connect this motor to port A. Amax represents the maximum Acceleration that will be achieved when the motor is stationary and the maximum power is applied. Its mainly for holding the motor in position. High amax-&gt; high overshooting. Vmax is the maximum Velocity that will be achieved. High vmax -&gt; smoother breaking, no overshooting.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motors</td><td>The number of motors which should be contorled. </td></tr>
    <tr><td class="paramname">amax</td><td>Control-parameter maximum Acceleration. </td></tr>
    <tr><td class="paramname">vmax</td><td>Control-parameter maximum Velocity. </td></tr>
    <tr><td class="paramname">regTime</td><td>Minimum regulation time. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a55bcc3fb8765627dc4a86ea69dbba619"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">task Motor_Controller_Task </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main control task. </p>
<p>Start the task after initMC! start Motor_Controller_Task; </p>

</div>
</div>
<a class="anchor" id="ad3700fdd19b88a02d1825fd033cbdc3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">safecall void motorEmergencyStop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop (all) motors and shut down motor controller. </p>
<p>If you only want to turn the controller off you should use controllerOff. This function will immediately brake the motors and shut down the motor-controller-task. </p>

</div>
</div>
<a class="anchor" id="ac22c63565d6a7aa8f9528f92bec72999"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void motorOff </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop and break motor. </p>
<p>Do not use nxc api motor function Off!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Desired output port: OUT_A, OUT_B, OUT_C </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4549b464f902b13018351bfe4d6c0731"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moveAbs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pwr</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>wait_move</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move motor to absolute position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Desired output port: OUT_A, OUT_B, OUT_C </td></tr>
    <tr><td class="paramname">pos</td><td>Position in degrees. 0°-360° </td></tr>
    <tr><td class="paramname">pwr</td><td>Output power 1%-100% pwr = 0 will use the last used power. </td></tr>
    <tr><td class="paramname">wait_move</td><td>Wait until move is done. (true = wait) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a319794c32fee3af065fc89a9acf1be6b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool moveDone </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if move is done. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Desired output port: OUT_A, OUT_B, OUT_C </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if move is done. </dd></dl>

</div>
</div>
<a class="anchor" id="a389643e60e17074ddcb0a860fe4f9835"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moveFwd </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>pwr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run motor forward. </p>
<p>Do not use nxc api motor function OnFwd!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Desired output port: OUT_A, OUT_B, OUT_C </td></tr>
    <tr><td class="paramname">pwr</td><td>Output power -100% - 100% </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac54d65a40b60cea5003df3fd21dc8f13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moveRel </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pwr</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>wait_move</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>off</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move motor relative. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Desired output port: OUT_A, OUT_B, OUT_C </td></tr>
    <tr><td class="paramname">pos</td><td>Position in degrees. 0°-360° </td></tr>
    <tr><td class="paramname">pwr</td><td>Output power 1%-100% pwr = 0 will use the last used power. </td></tr>
    <tr><td class="paramname">wait_move</td><td>Wait until move is done. (true = wait) </td></tr>
    <tr><td class="paramname">off</td><td>Offset. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a21089b6deb0882d334999de0a8916b05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moveRev </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>pwr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run motor reverse dir. </p>
<p>Do not use nxc api motor function OnRev!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Desired output port: OUT_A, OUT_B, OUT_C </td></tr>
    <tr><td class="paramname">pwr</td><td>Output power -100% - 100% </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a04b8456baf10d81cebd9170d9415a90b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resetMotor </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>pwr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the motor. </p>
<p>Reset the motor by turning until stalling. Be aware of using this function.</p>
<p>/param m Desired output port. Can be a constant or a variable, see Output port constants. /param pwr Output power, from -50 to +50, use the sign for direction. </p>

</div>
</div>
<a class="anchor" id="a11998768581b2e726f21d565ee4e1449"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void waitMove </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait until last move is done. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Desired output port: OUT_A, OUT_B, OUT_C </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="afb1e3999d2d8c484285a6799b9805578"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mutex motor_mtx</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>/private global motor mutex </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_275089585c7fc1b5fd5d7d42c69cb1da.html">D:</a></li><li class="navelem"><a class="el" href="dir_5691ced4130fea697073a2608ca509dd.html">nxc</a></li><li class="navelem"><a class="el" href="dir_2ff76dd390c2c0813625f3b738819b7e.html">nxcBoost</a></li><li class="navelem"><a class="el" href="motorcontroller_d_g_8nxc.html">motorcontrollerDG.nxc</a></li>
    <li class="footer">Generated on Mon Aug 12 2013 18:22:48 for nxcBoost by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
